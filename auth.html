<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xác thực - Future Xion</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="auth-page">

    <div class="auth-box">
        <div id="auth-content-area"></div>
    </div>
    
    <script>
        const authContentArea = document.getElementById('auth-content-area');

        // --- 1. LOGIN (FRAME 166) ---
        const getLoginFrame = () => `
            <div class="icon-lock" style="font-size: 3em;"><i class="fas fa-sun"></i></div>
            <h2>WELCOME BACK!</h2>
            <p class="subtitle">Đăng nhập để truy cập Dashboard và hồ sơ kỹ năng của bạn.</p>
            
            <form onsubmit="handleAuthSubmit(event, 'login')">
                <div class="form-group">
                    <label for="login-email" style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">Email hoặc Số điện thoại</label>
                    <input type="text" id="login-email" placeholder="Enter your email or phone number" required>
                </div>
                <div class="form-group">
                    <label for="login-password" style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">Mật khẩu</label>
                    <input type="password" id="login-password" placeholder="********" required>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 5px;">
                        <label style="font-size: 0.9em;"><input type="checkbox"> Remember me</label>
                        <a href="#" onclick="renderFrame('forgot')" class="link-small">Forgot password?</a>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-submit-primary btn-submit-email" style="margin-top: 5px;">Log in</button>
                
                <div class="auth-separator">Or</div>
                
                <button type="button" class="btn btn-submit-google" style="background: var(--color-white); border: 1px solid var(--border-color); color: var(--color-text-dark);">
                    <i class="fab fa-google" style="color: var(--color-primary);"></i> Sign in with Google
                </button>
            </form>

            <p class="auth-footer" style="margin-top: 30px;">
                Don't have an account? <a href="#" onclick="renderFrame('register')" class="link-small" style="font-weight: 700; margin-left: 5px;">Sign up</a>
            </p>
        `;

        // --- 2. REGISTER (FRAME 167) ---
        const getRegisterFrame = () => `
            <div class="icon-lock" style="font-size: 3em;"><i class="fas fa-user-circle"></i></div>
            <h2>Create Account</h2>
            <p class="subtitle">Đăng ký để bắt đầu đo lường kỹ năng mềm của bạn.</p>
            
            <form onsubmit="handleAuthSubmit(event, 'register')">
                <div class="form-group"><label style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">Name</label><input type="text" id="reg-name" placeholder="Full Name" required></div>
                <div class="form-group"><label style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">Username</label><input type="text" id="reg-username" placeholder="Username" required></div>
                <div class="form-group"><label style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">Email</label><input type="email" id="reg-email" placeholder="Email" required></div>
                <div class="form-group"><label style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">Password</label><input type="password" id="reg-password" placeholder="Password" required></div>
                
                <label style="display: block; font-size: 0.9em; text-align: left; margin-top: -10px; margin-bottom: 15px;">
                    <input type="checkbox" required> I agree to all terms and Privacy Policy
                </label>

                <button type="submit" class="btn btn-submit-primary btn-submit-email">Sign up</button>
                
                <div class="auth-separator">Or</div>
                
                <button type="button" class="btn btn-submit-google" style="background: var(--color-white); border: 1px solid var(--border-color); color: var(--color-text-dark);">
                    <i class="fab fa-google" style="color: var(--color-primary);"></i> Sign in with Google
                </button>
            </form>

            <p class="auth-footer" style="margin-top: 30px;">
                Already have an account? <a href="#" onclick="renderFrame('login')" class="link-small" style="font-weight: 700; margin-left: 5px;">Log in</a>
            </p>
        `;

        // --- 3. FORGOT PASSWORD (FRAME 168) ---
        const getForgotFrame = () => `
            <div class="icon-lock"><i class="fas fa-lock"></i></div>
            <h2>Forgot your password?</h2>
            <p class="subtitle">Enter your email so that we can send you password reset link</p>
            
            <form onsubmit="handleAuthSubmit(event, 'forgot')">
                <div class="form-group">
                    <label for="forgot-email" style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">Email</label>
                    <input type="email" id="forgot-email" placeholder="e.g. futurexion@gmail.com" required>
                </div>
                
                <button type="submit" class="btn reset-submit-btn btn-submit-email" style="background-color: #F8F0FF; color: var(--color-primary);">Send email</button>
                
                <a href="#" onclick="renderFrame('login')" class="link-small" style="display: block; margin-top: 20px;">&lt; BACK TO LOGIN</a>
            </form>
        `;

        // --- 4. RESET PASSWORD (FRAME 169) ---
        const getResetFrame = () => `
            <div class="icon-lock"><i class="fas fa-envelope-open-text"></i></div>
            <h2>Reset password</h2>
            <p class="subtitle">Please kindly set your new password</p>
            
            <form onsubmit="handleAuthSubmit(event, 'reset')">
                <div class="form-group">
                    <label for="new-password" style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">New password</label>
                    <input type="password" id="new-password" placeholder="Enter new password" required>
                    <p style="text-align: left; font-size: 0.8em; color: green; margin: 5px 0 0 0;">Password strength: Excellent</p>
                </div>
                <div class="form-group">
                    <label for="re-enter-password" style="display: block; text-align: left; font-size: 0.9em; margin-bottom: 5px;">Re-enter password</label>
                    <input type="password" id="re-enter-password" placeholder="Re-enter password" required>
                </div>
                
                <button type="submit" class="btn reset-submit-btn btn-submit-email" style="background-color: #F8F0FF; color: var(--color-primary);">Send email</button>
                
                <a href="#" onclick="renderFrame('login')" class="link-small" style="display: block; margin-top: 20px;">&lt; BACK TO LOGIN</a>
            </form>
        `;

        // --- RENDER LOGIC ---
        function renderFrame(frameName) {
            let htmlContent = '';
            switch (frameName) {
                case 'register': htmlContent = getRegisterFrame(); break;
                case 'forgot': htmlContent = getForgotFrame(); break;
                case 'reset': htmlContent = getResetFrame(); break;
                case 'login': default: htmlContent = getLoginFrame(); break;
            }
            authContentArea.innerHTML = htmlContent;
        }

        // --- SUBMISSION HANDLER ---
        function handleAuthSubmit(event, flow) {
            event.preventDefault();
            
            if (flow === 'login' || flow === 'register') {
                const userName = document.getElementById('reg-name')?.value || 'Sinh viên Tích cực';
                localStorage.setItem('currentUser', userName);
                alert(`${flow === 'login' ? 'Đăng nhập' : 'Đăng ký'} thành công! Chuyển hướng đến Dashboard.`);
                window.location.href = 'onboarding.html';
            } else if (flow === 'forgot') {
                alert(`Link đặt lại mật khẩu đã được gửi.`);
                renderFrame('reset');
            } else if (flow === 'reset') {
                alert("Mật khẩu đã được đặt lại thành công! Vui lòng đăng nhập.");
                renderFrame('login');
            }
        }

        // Khởi tạo trang với Frame Đăng nhập
        document.addEventListener('DOMContentLoaded', () => {
            renderFrame('login');
        });
    </script>

</body>
</html>